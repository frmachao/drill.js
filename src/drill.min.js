(t=>{"use strict";const e=document;const n=e.head;var r={};var i={};var a={};var c={paths:r,dirpaths:i,baseUrl:"",dataMap:a,tempM:{}};var o=Array.prototype.slice;var f=t=>o.call(t);var s=Object.prototype.toString;var u=t=>s.call(t).toLowerCase().replace(/(\[object )|(])/g,"");var p=t=>u(t).indexOf("function")>-1;var l=(t,e)=>{!(t instanceof Array)&&(t=f(t));t.some((t,n)=>!1===e(t,n));return t};var d=t=>{let e=t.match(/(.+\/).+/);return e&&e[1]};var h=t=>{let e=t.split(/\//g);let n=[];l(e,t=>{if(".."==t&&n.length&&".."!=n.slice(-1)[0])return void n.pop();n.push(t)});return n.join("/")};var v=(()=>{let t=!1;let e=[];return n=>{t||(t=!0,setTimeout(()=>{for(let t=0;t<e.length;t++)e[t]();e=[];t=!1},0));e.push(n)}})();var m=t=>{for(let e in t)return 0;return 1};var g=t=>void 0===t;var b=t=>new Promise(t);var k=t=>{var e=t.split(" ").filter(t=>{if(t)return t});return[e[0],e.slice(1)]};var y={loadScript:t=>{let r=t.path;let i=e.createElement("script");let{k:k,v:v}=q.cacheInfo;r&&k&&v&&(r.search(/\?/)>-1?r+="&"+k+"="+v:r+="?"+k+"="+v);i.type="text/javascript";i.async=!0;r&&(i.src=r);v(()=>{n.appendChild(i)});return i},agent:(t,e)=>b((n,r)=>{let{param:param,path:path}=t;let i=a[path];if(i)switch(i.state){case"loaded":case"pending":i.c.push({res:n,groupData:e});break;case"resolved":v(()=>{i.get?i.get(t=>{n(t)},e):n()});break;case"rejected":v(()=>{r()})}else{a[path]=i={state:"pending",c:[{res:n,rej:r,groupData:e}]};let o=y.loadScript(t);o.onload=(()=>{i.state="loaded";y.setTemp(t);c.tempM={}}),o.onerror=(()=>{for(;0 in i.c;)i.c.shift().rej("load script error => "+path);c.tempM={};i.state="rejected";delete i.c})}}),setTemp:t=>{let{path:path}=t;let{tempM:tempM}=c;let e=tempM.d;let{ids:ids}=tempM;ids&&"string"==u(ids)&&(ids=[ids]);let n=a[path];let r=n.type=tempM.type||"file";ids&&l(ids,t=>{a[t]=n});let i=t=>{for(;0 in n.c;)n.c.shift().res(t);n.get=(e=>{e(t)});n.state="resolved";delete n.c};switch(r){case"file":i();break;case"define":if(p(e)){let t={},n={exports:t},r=e((...t)=>y.require(t,{rel:path}),t,n,{FILE:path});r instanceof Promise?r.then(t=>{g(t)&&"object"==u(n.exports)&&!m(n.exports)&&(t=n.exports);i(t)}):i(r)}else i(e);break;case"task":if(i=null,!p(e))throw"task module type error";{let t=n.get=((t,n)=>{let r=e((...t)=>y.require(t,{rel:path}),n.pdata,{FILE:path});r.then(e=>{t(e)})});for(;0 in n.c;){let{res:res,groupData:groupData}=n.c.shift();t(res,groupData)}}n.state="resolved",delete n.c}},fixPath:(t,e)=>{let{param:param,path:path}=t;let n=e.rel;if(r[path])path=r[path];else{let t;for(let e in i)if((t=new RegExp("^"+e)).test(path)){path=path.replace(t,i[e]);break}}if(!/^.+?\/\//.test(path)){/\?.+$/.test(path)||/.js$/.test(path)||(path+=".js");let t=path.match(/^\.\/(.+)/);t?path=d(n)+t[1]:-1==param.indexOf("-r")&&(path=c.baseUrl+path),path=h(path)}t.path=path;return t},toProm:(t,e)=>{let n;let r=b((r,i)=>{let a=[];let c=t.length;let o=()=>{c--;c||(n=null,r(1==a.length?a[0]:a))};l(t,(t,r)=>{t=y.fixPath(t,e);let c=y.agent(t,e);c.then(t=>{a[r]=t;n&&n(t,r);o()}).catch(t=>{i(t)})})});r.pend=(t=>{n=t;return r});return r},require:(t,e={})=>{let n=[];l(t,t=>{let[e,r]=k(t);n.push({path:e,param:r})});let r=y.toProm(n,e);r.post=(t=>{e.pdata=t;return r});return r},define:(t,e)=>{c.tempM={type:"define",d:t,ids:e}},task:(t,e)=>{c.tempM={type:"task",d:t,ids:e}}};var j=(...t)=>y.require(t);var x=(t,e)=>{y.define(t,e)};var w=(t,e)=>{y.task(t,e)};var q={config:t=>{c.baseUrl=t.baseUrl||c.baseUrl;for(let e in t.paths)/\/$/.test(e)?i[e]=t.paths[e]:r[e]=t.paths[e]},remove:t=>{let{path:path}=y.fixPath({path:t},{});let e=a[path];if(e)return delete a[path],!0},extend:t=>{t(c,y)},require:j,define:x,task:w,cacheInfo:{k:"srcache"}};let M=e.currentScript;M||(M=e.querySelector(["drill-cache"]));if(M){let t=M.getAttribute("drill-cache");t&&(q.cacheInfo.v=t)}t.require||(t.require=j);t.define||(t.define=x);t.task||(t.task=w);if(t.drill){if(!p(t.drill))throw"async drill.js type error";t.drill(q)}t.drill=q;window.baseResources=c})(window);