(e=>{"use strict";const t=document;const n=t.head;var r={};var i={};var c={};var o={paths:r,dirpaths:i,baseUrl:"",dataMap:c,tempM:{}};var a=Array.prototype.slice;var s=e=>a.call(e);var u=Object.prototype.toString;var f=e=>u.call(e).toLowerCase().replace(/(\[object )|(])/g,"");var l=(e,t)=>{!(e instanceof Array)&&(e=s(e));e.some((e,n)=>!1===t(e,n));return e};var p=e=>{let t=e.match(/(.+\/).+/);return t&&t[1]};var d=e=>{let t=e.split(/\//g);let n=[];l(t,e=>{if(".."==e&&n.length&&".."!=n.slice(-1)[0])return void n.pop();n.push(e)});return n.join("/")};var h=(()=>{let e=!1;let t=[];return n=>{e||(e=!0,setTimeout(()=>{for(let e=0;e<t.length;e++)t[e]();t=[];e=!1},0));t.push(n)}})();var v=e=>{for(let t in e)return 0;return 1};var g=e=>void 0===e;var m=e=>new Promise(e);var b=e=>{var t=e.split(" ");return[t[0],t.slice(1)]};var k=(e,t)=>{var n=t.slice();n.unshift(e);return n.join(" ")};var y={loadScript:e=>{[e]=b(e);let r=t.createElement("script");let{k:k,v:v}=x.cacheInfo;e&&k&&v&&(e.search(/\?/)>-1?e+="&"+k+"="+v:e+="?"+k+"="+v);r.type="text/javascript";r.async=!0;e&&(r.src=e);h(()=>{n.appendChild(r)});return r},agent:(e,t)=>m((n,r)=>{let i;[e,i]=b(e);let a=c[e];if(a)switch(a.state){case"loaded":case"pending":a.c.push({res:n,pubData:t});break;case"resolved":h(()=>{a.get?a.get(e=>{n(e)},t):n()});break;case"rejected":h(()=>{r()})}else{c[e]=a={state:"pending",c:[{res:n,rej:r,pubData:t}]},e=k(e,i);let s=y.loadScript(e);s.onload=(()=>{a.state="loaded";y.setTemp(e);o.tempM={}}),s.onerror=(()=>{for(;0 in a.c;)a.c.shift().rej("load script error => "+e);o.tempM={};a.state="rejected";delete a.c})}}),toProm:(e,t)=>{let n;let r=m((r,i)=>{let c=[];let o=e.length;let a=()=>{o--;o||(n=null,r(1==c.length?c[0]:c))};l(e,(e,r)=>{let o=y.getPath(e,t);let s=y.agent(o,t);s.then(e=>{c[r]=e;n&&n(e,r);a()}).catch(e=>{i(e)})})});r.pend=(e=>{n=e;return r});return r},setTemp:e=>{[e]=b(e);let{tempM:tempM}=o;let t=tempM.d;let{ids:ids}=tempM;ids&&"string"==f(ids)&&(ids=[ids]);let n=c[e];let r=n.type=tempM.type||"file";ids&&l(ids,e=>{c[e]=n});let i=e=>{for(;0 in n.c;)n.c.shift().res(e);n.get=(t=>{t(e)});n.state="resolved";delete n.c};switch(r){case"file":i();break;case"define":if(f(t).search("function")>-1){let n={},r={exports:n},c=t(function(...t){return y.require(t,{rel:e})},n,r,{FILE:e});c instanceof Promise?c.then(e=>{g(e)&&"object"==f(r.exports)&&!v(r.exports)&&(e=r.exports);i(e)}):i(c)}else i(t);break;case"task":if(i=null,!(f(t).search("function")>-1))throw"task module type error";{let r=n.get=((n,r)=>{let i=t(function(...t){return y.require(t,{rel:e})},r.pdata,{FILE:e});i.then(e=>{n(e)})});for(;0 in n.c;){let{res:res,pubData:pubData}=n.c.shift();r(res,pubData)}}n.state="resolved",delete n.c}},getPath:(e,t)=>{let n;[e,n]=b(e);let c=t.rel;if(r[e])e=r[e];else{let t;for(let n in i)if((t=new RegExp("^"+n)).test(e)){e=e.replace(t,i[n]);break}}if(!/^.+?\/\//.test(e)){/\?.+$/.test(e)||/.js$/.test(e)||(e+=".js");let t=e.match(/^\.\/(.+)/);t?e=p(c)+t[1]:-1==n.indexOf("-r")&&(e=o.baseUrl+e),e=d(e)}e=k(e,n);return e},require:(e,t={})=>{let n=y.toProm(e,t);n.post=(e=>{t.pdata=e;return n});return n},define:(e,t)=>{o.tempM={type:"define",d:e,ids:t}},task:(e,t)=>{o.tempM={type:"task",d:e,ids:t}}};var j=(...e)=>y.require(e);var w=(e,t)=>{y.define(e,t)};var q=(e,t)=>{y.task(e,t)};var x={config:e=>{o.baseUrl=e.baseUrl||o.baseUrl;for(let t in e.paths)/\/$/.test(t)?i[t]=e.paths[t]:r[t]=e.paths[t]},remove:e=>{let t=y.getPath(e,{});let n=c[t];if(n)return delete c[t],!0},extend:e=>{e(o,y)},require:j,define:w,task:q,cacheInfo:{k:"srcache"}};let M=t.currentScript;M||(M=t.querySelector(["drill-cache"]));if(M){let e=M.getAttribute("drill-cache");e&&(x.cacheInfo.v=e)}e.require||(e.require=j);e.define||(e.define=w);e.task||(e.task=q);if(e.drill){if(!f(e.drill))throw"async drill.js type error";e.drill(x)}e.drill=x;window.baseResources=o})(window);