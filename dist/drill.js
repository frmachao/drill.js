"use strict";(function(a){"use strict";var b=document.head,c="pending",e="resolved",d="rejected",f="loaded",g={},h={},i={},j={paths:g,dirpaths:h,baseUrl:"",dataMap:i,tempM:{}},k=Array.prototype.slice,l=function(a){return k.call(a)},m=Object.prototype.toString,n=function(a){return m.call(a).toLowerCase().replace(/(\[object )|(])/g,"")},o=function(a,b){return a instanceof Array||(a=l(a)),a.some(function(a,c){return!1===b(a,c)}),a},p=function(a){var b=a.match(/(.+\/).+/);return b&&b[1]},q=function(a){var b=a.split(/\//g),c=[];return o(b,function(a){return".."==a&&c.length&&".."!=c.slice(-1)[0]?void c.pop():void c.push(a)}),c.join("/")},r=function(){var a=!1,b=[];return function(c){a||(a=!0,setTimeout(function(){for(var c=0;c<b.length;c++)b[c]();b=[],a=!1},0)),b.push(c)}}(),s=function(a){for(var b in a)return 0;return 1},t=function(a){return a===void 0},u=function(a){return new Promise(a)},v={loadScript:function loadScript(a){var c=document.createElement("script"),d=z.cacheInfo,e=d.k,f=d.v;return e&&f&&(-1<a.search(/\?/)?a+="&"+e+"="+f:a+="?"+e+"="+f),c.type="text/javascript",c.async=!0,c.src=a,r(function(){b.appendChild(c)}),c},toProm:function toProm(a,b){var c,d=u(function(d,e){var f=[],g=a.length,h=function(){g--,g||(c=null,1==f.length?d(f[0]):d(f))};o(a,function(a,d){var g=v.getPath(a,b),i=v.agent(g,b);i.then(function(a){f[d]=a,c&&c(a,d),h()}).catch(function(a){e(a)})})});return d.pend=function(a){return c=a,d},d},agent:function agent(a,b){return u(function(g,h){var k=i[a];if(k)switch(k.state){case f:case c:k.c.push({res:g,pubData:b});break;case e:r(function(){k.get?k.get(function(a){g(a)},b):g()});break;case d:r(function(){h()});}else{i[a]=k={state:c,c:[{res:g,pubData:b}]};var l=v.loadScript(a);l.onload=function(){k.state=f,v.setTemp(a),j.tempM={}},l.onerror=function(){for(;0 in k.c;)k.c.shift().rej();j.tempM={},k.state=d,delete k.c}}})},setTemp:function setTemp(a){var b=j.tempM,c=b.d,d=b.ids;d&&"string"==n(d)&&(d=[d]);var f=i[a],g=f.type=b.type||"file";d&&o(d,function(a){i[a]=f});var h=function(a){for(;0 in f.c;)f.c.shift().res(a);f.get=function(b){b(a)},f.state=e,delete f.c};switch(g){case"file":h();break;case"define":if(-1<n(c).search("function")){var r={},u={exports:r},w=c.bind({FILE:a})(function(){return v.require(l(arguments),{rel:a})},r,u);w instanceof Promise?w.then(function(a){t(a)&&"object"==n(u.exports)&&!s(u.exports)&&(a=u.exports),h(a)}):h(w)}else h(c);break;case"task":if(h=null,-1<n(c).search("function"))for(var p=f.get=function(b,d){var e=c(function(){return v.require(l(arguments),{rel:a})},d.pdata);e.then(function(a){b(a)})};0 in f.c;){var k=f.c.shift(),m=k.res,q=k.pubData;p(m,q)}else throw"task module type error";f.state=e,delete f.c;}},getPath:function getPath(a,b){var c=b.rel;if(g[a])a=g[a];else{var d,e;for(var f in h)if(d=new RegExp("^"+f),e=d.test(a),e){a=a.replace(d,h[f]);break}}if(!/^.+?\/\//.test(a)){/\?.+$/.test(a)||/.js$/.test(a)||(a+=".js");var i=a.match(/^\.\/(.+)/);a=i?p(c)+i[1]:j.baseUrl+a,a=q(a)}return a},require:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},c=v.toProm(a,b);return c.post=function(a){return b.pdata=a,c},c},define:function define(a,b){j.tempM={type:"define",d:a,ids:b}},task:function task(a,b){j.tempM={type:"task",d:a,ids:b}}},w=function(){return v.require(l(arguments))},x=function(a,b){v.define(a,b)},y=function(a,b){v.task(a,b)},z={config:function config(a){for(var b in j.baseUrl=a.baseUrl||"",a.paths)/\/$/.test(b)?h[b]=a.paths[b]:g[b]=a.paths[b]},remove:function remove(a){var b=v.getPath(a),c=i[b];if(c)return delete i[b],!0},extend:function extend(a){a(j,v)},require:w,define:x,task:y,cacheInfo:{k:"srcache"}};a.require||(a.require=w),a.define||(a.define=x),a.task||(a.task=y),a.drill=z,window.baseResources=j})(window);

//# sourceMappingURL=drill.js.map